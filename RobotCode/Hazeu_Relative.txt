# IO
table_horizontal_extension = 1		# extend the traysupports of the table sideways, True for extended, False for retracted.
table_vertical_extension = 2		# extend the table to the top of the box, True for extended, False for retracted.
EOAT_grab_compression = 3			# compresses the claws of the End of Arm Tool. True for compressed, False for extended.

# Poses
on_conveyor_pose = p[0.628,-0.061,0.014,1.7211,0.8028,1.7540]		# Pose where the EOAT is around the tray on the supply conveyor.
on_table_pose = p[0.673,-1.196,0.613,1.4802,-0.5248,0.5759]			# Pose where the EOAT placed the tray on the retracting table.

# Calculated Poses
start_pose = pose_add(on_conveyor_pose, p[0, -0.3, 0.8, 0, 0, 0])
next_to_conveyer_pose = pose_add(on_conveyor_pose, p[0, -0.3, 0, 0, 0, 0])
rotated_for_placement_pose = pose_add(on_table_pose, p[0, 0, 0.2, 0, 0, 0])
above_placement1_pose = pose_add(on_table_pose, p[0, 0, 0.2, 0, 0, 0])
remove_tool1_pose = pose_add(on_table_pose, p[-0.3, 0, 0, 0, 0, 0])

#init
#set_digital_out(table_horizontal_extension,False)
#set_digital_out(table_vertical_extension,False)
set_digital_out(EOAT_grab_compression,False)

movej(start_pose)
sleep(1)

while(True):
	# Grab from conveyor
	movel(next_to_conveyer_pose)
	sleep(1)
	movel(on_conveyor_pose)
	set_digital_out(EOAT_grab_compression, True)
	sleep(0.3)
	
	# Place on table
	movel(start_pose)
	movel(rotated_for_placement_pose)
	movel(above_placement1_pose)
	movel(on_table_pose)
	set_digital_out(EOAT_grab_compression, False)
	sleep(0.3)
	movel(remove_tool1_pose)
	
	
	#for testing
	movej(start_pose)
	#set_digital_out(EOAT_grab_compression, False)
end
#en werkt het nu?